{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Naino_Translation</title>
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">

  </head>
  <body>
    <div class="container my-5">
    <div class="box translate center" style="max-width: 600px; margin: auto;">

        <h2 class="text-center mb-4">üåç Naino_Translator</h2>

        <form id="translateForm">
            <textarea id="text" class="form-control mb-3" rows="4" placeholder="Enter text to translate..."></textarea>

            <div class="row">
                <div class="col">
                    <label>Source Language</label>
                    <select id="source" class="form-control">
                        <option value="en">English</option>
                        <option value="ur">Urdu</option>
                        <option value="ko">Korean</option>
                        <option value="ar">Arabic</option>
                    </select>
                </div>

                <div class="col">
                    <label>Target Language</label>
                    <select id="target" class="form-control">
                        <option value="ur">Urdu</option>
                        <option value="en">English</option>
                        <option value="ko">Korean</option>
                        <option value="ar">Arabic</option>
                    </select>
                </div>
            </div>

            <button type="button" class="btn btn-primary mt-3 w-100" onclick="translateText()">Translate</button>
            
        </form>

        <h4 class="mt-4">Translated Text:</h4>
        <div id="output" class="p-3 border rounded" style="min-height: 80px;"></div>

        <button class="btn btn-secondary mt-3 w-100" onclick="copyText()">Copy</button>

    </div>
</div>

  </body>
</html>

<script>
function translateText() {
    let text = document.getElementById("text").value;
    let source = document.getElementById("source").value;
    let target = document.getElementById("target").value;

    if (!text.trim()) {
        alert("Please enter text to translate!");
        return;
    }

    fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${source}|${target}`)
        .then(res => res.json())
        .then(data => {
            let translated = data.responseData.translatedText;
            document.getElementById("output").innerText = translated;

            // Auto speak after translation
            speak(translated, target);
        });
}

function copyText() {
    const text = document.getElementById("output").innerText;
    if (!text.trim()) {
        alert("Nothing to copy!");
        return;
    }
    navigator.clipboard.writeText(text);
    alert("Copied!");
}

</script>

